<% content_for :title do %><%= @event.title %> - Game Grids<% end %>

<div class="container-fluid p-3">
  <%# Upcoming games first (earliest first) %>
  <% @upcoming_games.each_with_index do |game, index| %>
    <div class="game-page avoid-break">
      <%# Game header %>
      <div class="game-header text-center mb-2">
        <h4><%= game.title %></h4>
        <p class="text-muted mb-1">
          <%= game.league.name %> |
          <%= game.starts_at.in_time_zone("America/Los_Angeles").strftime("%B %d, %Y at %l:%M %p %Z") %>
        </p>
      </div>

      <%# Grid %>
      <div class="mb-3">
        <%= render "games/components/grid_grid", game: game, players_by_id: players_by_id %>
      </div>

      <%# Scores and Winners side by side %>
      <div class="row">
        <div class="col-5">
          <%= render "games/components/grid_scores", game: game, highlight_period: nil %>
        </div>
        <div class="col-1"></div>
        <div class="col-6">
          <%= render "games/components/grid_winners", game: game, highlight_period: nil %>
        </div>
      </div>
    </div>

    <% unless index == @upcoming_games.size - 1 && @completed_games.empty? %>
      <div class="page-break"></div>
    <% end %>
  <% end %>

  <%# Completed games (latest first) %>
  <% @completed_games.each_with_index do |game, index| %>
    <div class="game-page avoid-break">
      <%# Game header %>
      <div class="game-header text-center mb-2">
        <h4><%= game.title %></h4>
        <p class="text-muted mb-1">
          <%= game.league.name %> |
          <%= game.starts_at.in_time_zone("America/Los_Angeles").strftime("%B %d, %Y") %>
        </p>
      </div>

      <%# Grid %>
      <div class="mb-3">
        <%= render "games/components/grid_grid", game: game, players_by_id: players_by_id %>
      </div>

      <%# Scores and Winners side by side %>
      <div class="row">
        <div class="col-5">
          <%= render "games/components/grid_scores", game: game, highlight_period: nil %>
        </div>
        <div class="col-1"></div>
        <div class="col-6">
          <%= render "games/components/grid_winners", game: game, highlight_period: nil %>
        </div>
      </div>
    </div>

    <% unless index == @completed_games.size - 1 %>
      <div class="page-break"></div>
    <% end %>
  <% end %>
</div>
