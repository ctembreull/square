<div class="modal fade" id="manualScoresModal" tabindex="-1" aria-labelledby="manualScoresModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<%= form_with url: manual_scores_game_path(game), method: :patch, local: true do |f| %>
				<div class="modal-header py-2">
					<h6 class="modal-title mb-0" id="manualScoresModalLabel">Manual Score Entry</h6>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body p-2">
					<% periods = game.league.periods %>
					<% existing_scores = game.scores.by_period.index_by(&:period) %>

					<table class="scores-grid m-0">
						<tbody>
							<tr class="scores-header">
								<th class="scores-team"></th>
								<% (1..periods).each do |period| %>
									<th class="scores-period bg-200 py-1 fw-bold h6 fs-10 text-center">
										<%= existing_scores[period]&.period_header || period %>
									</th>
								<% end %>
							</tr>
							<tr class="scores-row scores-away">
								<th class="p-0 h6 border-bottom border-400">
									<div class="p-2 <%= game.away_style %>"><%= game.away_team.abbr %></div>
								</th>
								<% (1..periods).each do |period| %>
									<td class="p-1">
										<%= number_field_tag "away_scores[#{period}]",
											existing_scores[period]&.away,
											class: "form-control form-control-sm text-center px-1",
											min: 0 %>
									</td>
								<% end %>
							</tr>
							<tr class="scores-row scores-home">
								<th class="p-0 h6">
									<div class="p-2 <%= game.home_style %>"><%= game.home_team.abbr %></div>
								</th>
								<% (1..periods).each do |period| %>
									<td class="p-1">
										<%= number_field_tag "home_scores[#{period}]",
											existing_scores[period]&.home,
											class: "form-control form-control-sm text-center px-1",
											min: 0 %>
									</td>
								<% end %>
							</tr>
						</tbody>
					</table>

					<div class="form-check form-check-inline mt-2">
						<%= check_box_tag :mark_final, "1", game.completed?, class: "form-check-input", id: "markFinal" %>
						<label class="form-check-label fs-10" for="markFinal">
							Mark as Final
						</label>
					</div>
					<div class="form-check form-check-inline mt-2">
						<%= check_box_tag :overtime, "1", existing_scores[periods]&.ot?, class: "form-check-input", id: "overtime" %>
						<label class="form-check-label fs-10" for="overtime">
							Overtime
						</label>
					</div>
				</div>
				<div class="modal-footer py-2">
					<button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
					<button type="submit" class="btn btn-primary btn-sm">
						<span class="fas fa-save me-1"></span> Save
					</button>
				</div>
			<% end %>
		</div>
	</div>
</div>
